<div class="page-header position-relative">
	<h1>
		Mapping User LDAP 
	</h1>
</div>
{if $sts eq 'add'}
<div class="row-fluid">
	<div class="span6" id="span_na_{$acak}">
		<div id='tb_ldap_user' style="padding:5px;height:{$tinggi_toolbar|default:'35px'};">
			<div style="float:{$align|default:'left'}; width:100%;">
				<input type="text" name="key_{$acak}" id="key_{$acak}" style="width:70%;" placeholder="Cari Berdasarkan User">
				&nbsp;&nbsp;&nbsp;
				<a href="javascript:void(0)" style='margin-top:-10px' class="l-btn l-btn-small l-btn-plain" group="" id="" onClick="cariData('{$acak}');">
					<span class="l-btn-left l-btn-icon-left">
						<span class="l-btn-text">Find</span><span class="l-btn-icon icon-search">&nbsp;</span>
					</span>
				</a>	
			</div>
		</div>
		<div id="grid_ldap_{$acak}"></div>
	</div>
	<div class="span5">
		<form id="Form_{$acak}" url="{$host}backoffice-simpan/tbl_ldap_group" enctype="multipart/form-data" method="post">
		<input type="hidden" name="user_ldap" id="user_ldap">
		<input type="hidden" name="flag" id="flag" value='P'>
		<input type='hidden' name="editstatus" value="{$sts|default:'add'}" />
		<div class="span12">
			<div class="well">
				<label>User</label> : <span id="user_na"></span><br>
				<label>Nama</label> : <span id="nama_na"></span>
				
			</div>
		</div>
		<div class="span12" >
			<div class="span6">
				<div class="well">
					<div class="control-group">
						<label class="control-label" style="width:450px;">Group User : </label>
						{foreach from=$group item=i name=x}
						<div class="controls">
							<label>
								<input name="cl_group_user_id" type="radio" value="{$i.id}" class="validasi cek" />
								<span class="lbl" style="margin-left:6px;">{$i.group_user|default:'-'}</span>
							</label>
						</div>
						{/foreach}
					</div>
				</div>
			</div>
			<div class="span6">
				<div class="well">
					<div class="control-group">
						<label class="control-label" style="width:450px;">Unit Kerja : </label>
						{foreach from=$unit item=i name=x}
						<div class="controls">
							<label>
								<input name="cl_unit_kerja_id" type="radio" value="{$i.id}" class="validasi cek" />
								<span class="lbl" style="margin-left:6px;">{$i.nama_unit|default:'-'}</span>
							</label>
						</div>
						{/foreach}
					</div>
				</div>
			</div>
		</div>
		</form>
	</div>
</div>
{else}
<div class="row-fluid">
<div class="span11">
	<form id="Form_{$acak}" url="{$host}backoffice-simpan/tbl_ldap_group" enctype="multipart/form-data" method="post">
	<input type="hidden" name="id" id="id_na" value="{$data.id}">
	<input type='hidden' name="editstatus" value="{$sts|default:'add'}" />
	<div class="span12">
		<div class="well">
			<label>User</label> : {$data.user_ldap}<br>
		</div>
	</div>
	<div class="span12" >
		<div class="span6">
			<div class="well">
				<div class="control-group">
					<label class="control-label" style="width:450px;">Group User : </label>
					{foreach from=$group item=i name=x}
					<div class="controls">
						<label>
							<input name="cl_group_user_id" type="radio" value="{$i.id}" {if $data.cl_group_user_id eq $i.id}checked{/if}/>
							<span class="lbl" style="margin-left:6px;">{$i.group_user|default:'-'}</span>
						</label>
					</div>
					{/foreach}
				</div>
			</div>
		</div>
		<div class="span6">
			<div class="well">
				<div class="control-group">
					<label class="control-label" style="width:450px;">Unit Kerja : </label>
					{foreach from=$unit item=i name=x}
					<div class="controls">
						<label>
							<input name="cl_unit_kerja_id" type="radio" value="{$i.id}" {if $data.cl_unit_kerja_id eq $i.id}checked{/if} />
							<span class="lbl" style="margin-left:6px;">{$i.nama_unit|default:'-'}</span>
						</label>
					</div>
					{/foreach}
				</div>
			</div>
		</div>
	</div>
	</form>
</div>
</div>
{/if}
<div class="form-actions">
	<a class="btn btn-info" href='javascript:void(0);' id='simpanMngFile'>
		Simpan
	</a>
	&nbsp; &nbsp; &nbsp;
	<a class="btn btn-danger" href='javascript:void(0);' id='cancelMngFile'>
		Kembali
	</a>
</div>

<script>
	{if $sts eq 'add'}
		$('#span_na_{$acak}').css('height', (getClientHeight()-290));
		genGrid('ldap_user','grid_ldap_{$acak}', '', '');
	{/if}
	$('#cancelMngFile').on('click', function(){
		$('#detil_nya_{$mod}').html('');
		$('#grid_nya_{$mod}').show();
		$('#detilnya_nya_{$mod}').hide();
	});
	$('#simpanMngFile').on('click', function(){
		
		validasi = $('#Form_{$acak}').form('validate');
		submit_form('Form_{$acak}',function(r){
			if(r == 1){
				$.messager.alert('PGN Solution', "Data Tersimpan", 'info');
				$('.info-empty').remove();
				$('#detil_nya_{$mod}').html('');
				$('#grid_nya_{$mod}').show();
				$('#detilnya_nya_{$mod}').hide();
				$('#grid_{$mod}').datagrid('reload');
			}else{
				console.log(r);
				$.messager.alert('PGN Solution', "Failed Save", 'error');
			}
			
			
		});
		return false;
	});
</script>
